{% if product.metafields.custom.modelos_mh %}
  <div class="modelos-selector-container">
    <p class="modelos-label">Variantes Producto</p>

    <div class="modelos-selector">
      {% assign modelos = product.metafields.custom.modelos_mh | split: "," %}

      {% for modelo in modelos %}
        {% assign modelo_limpio = modelo | strip | remove: '[' | remove: ']' | remove: '"' | remove: "'" %}
        
        {% case modelo_limpio %}
          {% when "4 en 1 Anticaída" %}
            {% assign product_url = "https://www.masterholder.com.mx/products/mh-4en1-anticaida-negro" %}
            {% assign image_url = "https://cdn.shopify.com/s/files/1/0641/8933/3672/files/4-en-1-anticaida.png?v=1739799709" %}
          
          {% when "Portacaguamón" %}
            {% assign product_url = "https://www.masterholder.com.mx/products/portacaguamon-negro" %}
            {% assign image_url = "https://cdn.shopify.com/s/files/1/0641/8933/3672/files/portacaguamon.png?v=1739799710" %}
          
          {% when "Portalatón 5 en 1" %}
            {% assign product_url = "https://www.masterholder.com.mx/products/mh-portalaton-5-en-1-negro" %}
            {% assign image_url = "https://cdn.shopify.com/s/files/1/0641/8933/3672/files/portalaton-5-en-1.webp?v=1739799703" %}
          
          {% when "Nomada" %}
            {% assign product_url = "https://www.masterholder.com.mx/products/nomada-negro" %}
            {% assign image_url = "https://cdn.shopify.com/s/files/1/0641/8933/3672/files/nomada.png?v=1739803520" %}
          
          {% when "Venti" %}
            {% assign product_url = "https://www.masterholder.com.mx/products/mh-venti" %}
            {% assign image_url = "https://cdn.shopify.com/s/files/1/0641/8933/3672/files/venti.png?v=1739803552" %}
          
          {% when "Sport" %}
            {% assign product_url = "https://www.masterholder.com.mx/products/master-holder-sport-negro" %}
            {% assign image_url = "https://cdn.shopify.com/s/files/1/0641/8933/3672/files/sport.png?v=1739803520" %}
          
          {% when "Tazas 20 oz" %}
            {% assign product_url = "https://www.masterholder.com.mx/products/taza-termica-premium-20oz-aqua-glitter" %}
            {% assign image_url = "https://cdn.shopify.com/s/files/1/0641/8933/3672/files/tazas-20-oz.png?v=1739799710" %}
          
          {% when "Vaso 20 oz" %}
            {% assign product_url = "https://www.masterholder.com.mx/products/vaso-termico-20oz-azul" %}
            {% assign image_url = "https://cdn.shopify.com/s/files/1/0641/8933/3672/files/vaso-20-oz.png?v=1739799710" %}
        {% endcase %}

        <label class="modelo-option" data-url="{{ product_url }}">
          <img src="{{ image_url }}" alt="{{ modelo_limpio }}" class="modelo-image">
        </label>
      {% endfor %}
    </div>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", function() {
      let modeloOptions = document.querySelectorAll(".modelo-option");

      modeloOptions.forEach(option => {
        option.addEventListener("click", function() {
          let newUrl = this.getAttribute("data-url");
          if (newUrl) {
            window.location.href = newUrl;
          }
        });
      });
    });
  </script>

  <style>
    .modelos-selector-container {
      font-family:inherit;
      margin-bottom: 20px;
    }

    .modelos-label {
      font-size: 14px;
      margin-bottom: 5px;
    }

    .modelos-selector {
      display: flex;
      gap: 8px;
      justify-content: flex-start;
    }

    .modelo-option {
      cursor: pointer;
      border: 1px solid gainsboro;
      padding: 1px;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      width: 50px;
      height: 50px;
      border-radius: 50%;
      overflow: hidden;
      background: #f1f1f1;
    }

    .modelo-option:hover {
      border: 1px solid black;
    }

    .modelo-image {
      width: 100%;
      height: 100%;
      object-fit: cover;
      border-radius: 50%;
    }
  </style>
{% endif %}
