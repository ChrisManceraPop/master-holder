/*
 * ------------------------------------------------------------
 * IMPORTANT: The contents of this file are auto-generated.
 *
 * This file may be updated by the Shopify admin theme editor
 * or related systems. Please exercise caution as any changes
 * made to this file may be overwritten.
 * ------------------------------------------------------------
 */
{
  "sections": {
    "heading": {
      "type": "heading-template",
      "settings": {
        "heading_fullwidth": false,
        "use_specify_image": true,
        "parallax": false,
        "color": "#000000",
        "overlay": 54,
        "padding": 50,
        "paddingmb": 50,
        "mg_b": 50,
        "mg_bmb": 50,
        "content_align": "t4s-text-center",
        "bg_pos": "center center",
        "bg_repeat": "no-repeat",
        "bg_size": "cover",
        "use_cus_css": false,
        "code_cus_css": ".SectionID {\nbackground-color:red\n}"
      }
    },
    "main": {
      "type": "main-page",
      "settings": {
        "layout": "t4s-container-wrap",
        "cl_bg": "",
        "cl_bg_gradient": "",
        "mg": "60px,,60px,",
        "pd": "",
        "mg_tb": "",
        "pd_tb": "",
        "mg_mb": ",,30px,",
        "pd_mb": ""
      }
    },
    "sidebar-page": {
      "type": "sidebar-page",
      "blocks": {
        "f69681ed-b75e-42de-be58-fdf73b3b7e08": {
          "type": "blog_cate",
          "settings": {
            "title": "Blog categories",
            "cat_link_list": "",
            "count": true
          }
        }
      },
      "block_order": [
        "f69681ed-b75e-42de-be58-fdf73b3b7e08"
      ],
      "disabled": true,
      "settings": {
        "enable_drawer": false,
        "space": 50,
        "size": "medium",
        "br_style": "none",
        "brcolor": "#222222",
        "sidebar_bdr": 5,
        "sidebar_pd": 10
      }
    },
    "custom_liquid_CX46ap": {
      "type": "custom-liquid",
      "settings": {
        "custom_liquid": "<!-- Agregar Leaflet.js -->\n<link rel=\"stylesheet\" href=\"https://unpkg.com/leaflet@1.9.4/dist/leaflet.css\" />\n<script src=\"https://unpkg.com/leaflet@1.9.4/dist/leaflet.js\"></script>\n\n<style>\n    /* Centrar el buscador */\n    .contenedor-buscador {\n        text-align: center;\n        margin-top: 50px;\n    }\n\n    #buscador {\n        width: 50%;\n        padding: 10px;\n        font-size: 16px;\n        text-align: center;\n        border: 1px solid #ccc;\n        border-radius: 5px;\n        outline: none;\n    }\n\n    /* Contenedor del mapa */\n    .map-container {\n        width: 100%;\n        height: 500px;\n        margin-top: 20px;\n        border-radius: 8px;\n        position: relative;\n    }\n\n    #map {\n        width: 100%;\n        height: 100%;\n        min-height: 500px;\n        border-radius: 8px;\n    }\n</style>\n\n<div class=\"contenedor-buscador\">\n    <input type=\"text\" id=\"buscador\" placeholder=\"Buscar distribuidores por ciudad...\" onkeyup=\"filtrarDistribuidores()\">\n</div>\n\n<div class=\"map-container\">\n    <div id=\"map\"></div>\n</div>\n\n<script>\n    document.addEventListener(\"DOMContentLoaded\", function() {\n        // Verificar que el mapa exista antes de inicializarlo\n        var mapElement = document.getElementById('map');\n        if (!mapElement) {\n            console.error(\"No se encontró el contenedor del mapa\");\n            return;\n        }\n\n        var map = L.map('map').setView([19.4326, -99.1332], 6); // Centrar en México\n\n        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n            attribution: '&copy; OpenStreetMap contributors'\n        }).addTo(map);\n\n        var distribuidores = [\n            {% for distribuidor in shop.metaobjects.distribuidor.values %}\n                {\n                    nombre: \"{{ distribuidor.nombre }}\",\n                    ciudad: \"{{ distribuidor.ciudad | escape }}\",\n                    direccion: \"{{ distribuidor.direccion | escape }}\",\n                    telefono: \"{{ distribuidor.telefono }}\",\n                    horario: \"{{ distribuidor.horario }}\",\n                    logo: \"{{ distribuidor.logo | image_url }}\",\n                    lat: {{ distribuidor.latitud | default: 19.4326 }},\n                    lng: {{ distribuidor.longitud | default: -99.1332 }}\n                }{% unless forloop.last %},{% endunless %}\n            {% endfor %}\n        ];\n\n        var markers = [];\n\n        function filtrarDistribuidores() {\n            var filtro = document.getElementById(\"buscador\").value.toLowerCase();\n\n            // Eliminar todos los marcadores antes de agregar los nuevos\n            markers.forEach(marker => map.removeLayer(marker));\n            markers = [];\n\n            // Filtrar distribuidores por ciudad y agregarlos al mapa\n            distribuidores.forEach(function(d) {\n                if (d.ciudad.toLowerCase().includes(filtro) && filtro !== \"\") {\n                    var marker = L.marker([d.lat, d.lng]).addTo(map)\n                        .bindPopup(`\n                            <div style='text-align: center;'>\n                                <img src=\"${d.logo}\" width=\"60\" style=\"border-radius:5px;\"><br>\n                                <strong>${d.nombre}</strong><br>\n                                ${d.ciudad}<br>\n                                <b>Dirección:</b> ${d.direccion}<br>\n                                <b>Teléfono:</b> ${d.telefono}<br>\n                                <b>Horario:</b> ${d.horario}\n                            </div>\n                        `);\n                    markers.push(marker);\n                }\n            });\n\n            // Si hay resultados, ajustar el zoom al primer marcador\n            if (markers.length > 0) {\n                var group = new L.featureGroup(markers);\n                map.fitBounds(group.getBounds(), { padding: [50, 50] });\n            } else {\n                map.setView([19.4326, -99.1332], 6); // Resetear vista si no hay resultados\n            }\n        }\n\n        // Esperar a que el mapa esté completamente cargado antes de renderizar\n        setTimeout(() => {\n            map.invalidateSize();\n        }, 500);\n    });\n</script>",
        "layout": "t4s-container-wrap",
        "cl_bg": "",
        "cl_bg_gradient": "",
        "mg": ",,50px,",
        "pd": "",
        "mg_tb": "",
        "pd_tb": "",
        "mg_mb": ",,30px,",
        "pd_mb": ""
      }
    }
  },
  "order": [
    "heading",
    "main",
    "sidebar-page",
    "custom_liquid_CX46ap"
  ]
}
